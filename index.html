<title>Continuous Web Speech API Test</title>
<h1>This is a Continuous Web Speech API Test</h1>
<h2> <a href="https://877bc70cfb789569a7d42065a0bc21421e336de0.googledrive.com/host/0B8jusDclXuZgbmJiV1ZwWUNHOGc/SpeechAPIKeyword.html" target="_blank">Another Version</a></h2>
<hr>
<p>Talk slowly and clearly for the best performance </p>
<p>Speak Continuouly and the text will be displayed below</p>
<hr>
<h3 id="p1"> </h3> 
<hr> 
<button onclick="clearText()">Clear Text</button>
<button onclick="speakIt()">Speak</button>
<script> 
if (!('webkitSpeechRecognition' in window)) { 
  upgrade();
} else {
  var recognition = new webkitSpeechRecognition(); 
  recognition.continuous = true;
  recognition.interimResults = true;

function clearText () {
document.getElementById("p1").innerHTML = ""; 
final_transcript = '';  
} 

recognition.onresult = function(event) {
    var interim_transcript = '';

    for (var i = event.resultIndex; i < event.results.length; ++i) {
      if (event.results[i].isFinal) {
        final_transcript += event.results[i][0].transcript;
      } else {
        interim_transcript += event.results[i][0].transcript;
      }
    }
 //final_span.innerHTML = linebreak(final_transcript);
document.getElementById("p1").innerHTML = final_transcript; 
  };
}
final_transcript = '';

recognition.start();

function speakIt() {
var msg = new SpeechSynthesisUtterance(document.getElementById("p1").innerHTML);
window.speechSynthesis.speak(msg);
}
</script>
